{% extends 'layout.html' %}
{% load static %}

{% block head %}
		{{block.super}}
        <link rel="stylesheet" href="{% static 'CSSDocs/profile.css' %}">
<script>

	function showRatingButtion(id) {

		var button = document.getElementById("rating-"+id);
		if(button.style.display === "none") {
			button.style.display = "initial";
		}
		else {
			button.style.display = "none";
		}
	}
</script>

{% endblock %}
{% block content %}


<div class="allstuff">

	<div class="topstuff">
		<img src="https://kvener.no/wp-content/uploads/2019/02/blank-profile-picture-973460_640.png"/>

		<div class="userinfo">

			<h2>{{user.first_name }} {{user.last_name }} </h2>
			<h3> {{user.email}}</h3>
			<h3> {{user.address }}</h3>
			<h3> {{user.post_code }} {{user.location }}</h3>

		</div>


	</div>
	<a onclick="location.href= '{% url 'editUser' %}'"><button type="button">  Endre Bruker </button></a>
<hr>
	<div class="allergies">

		{% if userAllergies %}
			<h3> Dine allergier </h3>
			<div class="allergyList">
				{% for key, value in userAllergies.items %}
					 {{ value }},
			{% endfor %}
			</div>
		<a onclick="location.href = '{% url 'addAllergies' %}' "> <button type="button">Rediger allergier</button></a>
		{% else %}
			<h3> Du har ingen allergier:</h3>
		<a onclick="location.href = '{% url 'addAllergies' %}' "> <button type="button">Legg til allergier</button></a>
		{% endif %}


	</div>
<hr>
	<div class="isindinner">


	</div>

	<div class="arrangeddinners">

		<div class="parent">
			{% if arrangement %}
			<h3> Du har meldt deg på følgende middag: </h3>

				{% for key, name in arrangement.items %}
				<li><div class="flex-child" onclick="location.href= '{% url 'chooseMeal' event_id=key %}' ">
					{% for dinner in name %}
						 {{ dinner }}
					{% endfor %}
				</li>
			{% endfor %}
			</div>
		{% else %}
			<h3> Du er ikke påmeldt noen middager</h3>
		{% endif %}

			<div class="parent">
			{% if hosting %}
			<h3> Du arrangerer disse middagene:  </h3>

				{% for key, name in hosting.items %}
				<li>
					<div class="flex-child" onclick="location.href= '{% url 'chooseMeal' event_id=key %}' ">
					{% for dinner in name %}
						<td> {{ dinner }} </td>
					{% endfor %}
				</li>
			{% endfor %}
				{% else %}
			<h3> Du arrangerer ingen middager </h3>
		{% endif %}
	</div>

	<div class="parent">
			<h3> Du har deltatt på disse middagene:  </h3>

				{% for event, values in past_event_dict.items %}
				<li>
					<div class="flex-child" onclick="showRatingButtion({{event}})">
					{% for dinner in values %}
						<td> {{ dinner }} </td>
					{% endfor %}
				</li>
				<button id="rating-{{event}}" class="ratingButton" onclick="location.href= '{% url 'feedback' event_id=event %}' ">Gi tilbakemelding</button>
			{% endfor %}

	</div>

	<div class="parent">
			<h3> Tilbakemeldinger på middager du har arrangert:  </h3>

				{% for key, value in feedback_dict.items %}
				<li>
					<div class="flex-child" onclick="showRatingButtion({{event}})">
						Kommentar fra <b>{{value.1}}</b>
						på middagen <b>{{value.0}}</b>:
						<br>
						{{value.2}}
						<br>
						<br>
						Rating på middagen er:
						{{value.3}}
				</li>
			{% endfor %}

	</div>



	</div>

</div>




<!--
<div class="post-container">
    <div class="post-thumb">
		<img src="https://kvener.no/wp-content/uploads/2019/02/blank-profile-picture-973460_640.png" />
	</div>

	<div class="post-content">
		<h2>{{user.fornavn }} {{user.etternavn }} </h2>
		<h3> {{user.epost}}</h3>
		<h3> {{user.adresse }}</h3>
		<h3> {{user.postnummer }} {{user.sted }}</h3>

        <div class="form-row">
			<div class = "button-style">
				<a onclick="location.href= '{% url 'editUser' %}'"><button type="button">  Endre Bruker </button></a>
			</div>
		</div>

	</div>
	<div>
		{% if userAllergies %}
			<h3> {{user.fornavn}} har allergier </h3>
			<div>
				{% for key, value in userAllergies.items %}
				<tr>
					<td> {{ value }} </td>
				</tr>
			{% endfor %}
			</div>
		{% else %}
			<h3> {{user.fornavn}} har ingen allergier</h3>
		{% endif %}

	</div>
		<div>
			{% if arrangement %}
			<h3> {{user.fornavn}} har meldt seg på følgende middag </h3>
			<div>
				{% for key, name in arrangement.items %}
				<li>
					{{ name.arrangementnavn }}
					{% for dinner in name %}
						<td> {{ dinner }} </td>
					{% endfor %}
				</li>
			{% endfor %}
			</div>
		{% else %}
			<h3> {{user.fornavn}} er ikke påmeldt noen middager</h3>
		{% endif %}

	</div>
			<div>
			{% if hosting %}
			<h3> {{user.fornavn}} arrangerer disse middagene:  </h3>
			<div>
				{% for key, name in hosting.items %}
				<li>
					{% for dinner in name %}
						<td> {{ dinner }} </td>
					{% endfor %}
				</li>
			{% endfor %}
				{% else %}
			<h3> {{user.fornavn}} arrangerer ingen middager </h3>
		{% endif %}


	</div>
</div>
</div>
</div>-->
{% endblock %}
